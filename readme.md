# これは何
discordのbotを介してテキストチャンネル、スレッド、フォーラムの全IDを取得するためのもの  
  
書き換える必要がある場所がなん箇所かあるからちょっと注意  
readme含め、へたくそなのでお粗末なところは許して  

# 必要なもの
- nodejs (npm installで使う)
- python (Jupyter Notebook使用想定)
- Jupyter (VSCodeでNotebook使うためのExtension)
- pythonのastモジュール (後で配列を結合するときに使う)
- DiscordChatExporter.Cli (ログのダウンロードに使う)

# 手順1: ID取得
> .env  
```py
BOT_TOKEN = fefh2hf984h29f8h4298fh4298fh489hf89ohf8942hg89498gh24hg9
CHANNEL_ID = 2532532523562362
GUILD_ID = 7743554634653452
```
を自分の鯖のIDと、あいさつ用のチャンネルIDと、そこにいる自分のBotのトークンに書き換えておく  
<br>

`git clone https://github.com/miatia1025/discord_ids`  
`cd discord_ids`  
`npm install`  <- ここでNodejsが必要  
`node index.js`
<br>

結果(例)
```py
[
  '1046673733844209696',
  '1077208520044322827',
  '1077210412547846296',
  '1077733271733022761',
  '1081024659518136381',
  '1083615994003603456',
  '1083769116860612648',
  '1091438129552052405',
  '1091438486751555596',
  '1091596905978527755',
  '1091615836122402862'
]
[
  '952171465816567829',  '952615383993565234',
  '952885823190208533',  '956054344669732874',
  '957204458570416168',  '957261747708887090',
  '958014018256261203',  '958336812919693354',
  '959110865091694682',  '959783115616825375',
  '977707737066639450',  '1000331670005764147',
  '1012692509224349707', '1034050282818129941',
  '1034772950198538250', '1036196193711173692',
  '1038204517386293258', '1038255463705358377',
  '1038270423453937737', '1038333577852616714',
  '1038334042287915048', '1038603958207381584',
  '1039155095687938088', '1039458482568577074',
  '1039499880621686835', '1039532095434924042',
  '1039812704086536206', '1039927949668921474',
  '1039946902319407154', '1041018822703984680',
  '1041686057349025802', '1041965700362813490',
  '1042758635236896829', '1043492339575959632',
  '1044247870448091206', '1044611283862962216',
  '1045252532521422878', '1045282143921782884',
  '1045607851814559814', '1047715766696427561',
  '1047716262769340426', '1048931541058846731',
  '1051623548730478722', '1073024753171963934'
]
[
  '952163309560414252',  '952166334026887198',
  '952166358836191242',  '952166383129608212',
  '952166614839734303',  '952166754849787956',
  '952168843336376390',  '957994191173058570',
  '958599897265897492',  '978264366786957353',
  '995004952021848196',  '1005779685147426856',
  '1010103524589318205', '1012342310064898098',
  '1031514569404850186', '1034450545513087006',
  '1038202638241636494', '1038202699272962158',
  '1038203072788320306', '1039515516206850148',
  '1045932202682232902', '1083765012742541382',
  '1091278482119598100'
]
```

# 手順2: ログ取得
※Notebook使う前提です  

## 1 環境作成
### A: conda民  
`conda create prefix ./conda python=3.10.6`  

### B: mamba民  
`mamba create prefix ./mamba python=3.10.6`  

### C: Python民
`py -3.10 -m venv venv`  
<br>

## 2 Notebook実行
`code .`  
notebook.ipynbを開いて  
カーネル(実行環境)を今作った仮想環境に切り替える  
<br>
一番目のセルの `active_and_topics` に一番目の配列、  
`archived` に二番目の配列、  
`channels` に三番目の配列、  
をぶち込んで  

三番目のセルに適切なものを入れて  
```py
# DiscordChatExporter.Cli.dll へのパス
path = r"C:\Users\meowt\Downloads\DCE_CLI\DiscordChatExporter.Cli.dll"
# botのトークン
token = idshgoushgoiewshogheoigfhewsoihgfoeishgoirewhgoirhg
# ログをアウトプットするパス
output_path = r"C:\Users\meowt\Downloads\DCE_CLI\outputs"
# アウトプットの形式(JSON固定)
file_format = r"JSON"
```

全部実行！  
# 手順3: DiscordChatExporter Frontendに感謝
https://github.com/slatinsky/DiscordChatExporter-frontend  
のリリースの方から落として、`exports` の中にサーバー名とかでフォルダを作って、そこにさっきDiscordChatExporterで落としたログを突っ込んで起動
    
終
